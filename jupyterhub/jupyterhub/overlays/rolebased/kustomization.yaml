apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
bases:
- ../../base

resources:
- jupyterhub-imagestream.yaml
- jupyterhub-dh-buildconfig.yaml
- role-mount-sample-config-map.yaml
#resources:
patchesJson6902:
- target:
    group: apps.openshift.io
    kind: DeploymentConfig
    version: v1
    name: jupyterhub
  path: jupyterhub-dc.yaml

generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
  - name: jupyterhub-rbac
    envs:
      - params.env
vars:
  - name: role_mount_configmap
    objref:
      kind: ConfigMap
      apiVersion: v1
      name: jupyterhub-rbac
    fieldref:
      fieldpath: data.role_mount_configmap


configurations:
  - params.yaml

commonLabels:
  opendatahub.io/component: "true"
  component.opendatahub.io/name: jupyterhub
